/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.6.2/userguide/tutorial_java_projects.html
 */

plugins {
    // Apply the java plugin to add support for Java
    id 'java'

}

repositories {
    // Use jcenter for resolving dependencies.
    // You can declare any Maven/Ivy/file repository here.
    mavenCentral()
    mavenLocal()
    jcenter()
}

dependencies {
    // This dependency is used by the application.
    implementation 'com.google.guava:guava:28.0-jre'

    //optimus
    implementation 'com.testvagrant.ekam:ekam-api:0.0.1-alpha'

    // square
    implementation('com.squareup.retrofit2:retrofit:2.9.0')
    implementation('com.squareup.retrofit2:converter-gson:2.9.0')
    implementation('com.squareup.okhttp3:logging-interceptor:3.8.0')


    //mongodb
    compile group: 'org.mongodb', name: 'mongo-java-driver', version: '3.4.2'

    //lombok
    implementation('org.projectlombok:lombok:1.18.12')
    annotationProcessor('org.projectlombok:lombok:1.18.12')
    testImplementation('org.projectlombok:lombok:1.18.12')
    testAnnotationProcessor('org.projectlombok:lombok:1.18.12')


    // Use TestNG framework, also requires calling test.useTestNG() below
    implementation 'org.testng:testng:6.14.3'
}

task runMobileTests(type: Test) {
    outputs.upToDateWhen { false }
    useTestNG {
        parallel = "tests"
        threadCount = 4
        includeGroups System.getProperty("tags", "checkRates")
        testLogging.showStandardStreams = true
        useDefaultListeners true
        listeners << 'com.testvagrant.optimus.dashboard.listeners.ReportListener'
        listeners << 'com.testvagrant.optimus.dashboard.listeners.TestListener'
        outputDirectory = file("$buildDir/" + System.getProperty('tags', 'NONE'))
    }
}
